define("km/app",["jquery","km/router","km/popTips","km/util","km/loading"],function(t,e,i,n,o){var s=function(e,n){this._route={},this._view=null,this._on={viewBeforeShow:[],viewAfterShow:[]},this.$el=e,this.config=t.extend({viewClass:"app-view",Template:null},n||{}),this.loading={show:function(){o.show()},hide:function(){o.hide()}},this.showTip=i};return s.prototype.on=function(t,e){return this._on.hasOwnProperty(t)&&this._on[t].push(e),this},s.prototype.off=function(t){return this._on.hasOwnProperty(t)&&(this._on[t]=[]),this},s.prototype.callView=function(e,i,n){var o,s=this;t.map(s._on.viewBeforeShow,function(t){t(e)}),n=n||function(){};var r=function(e){n(),t.map(s._on.viewAfterShow,function(t){t(e)})};if(null!==s._view){if(s._view.name===e)return s._view.instance.run(i),void r(s._view.instance);var a=s._view.instance;a.destroy()}s.loading.show();var u=function(n){s.loading.hide(),o=t('<div class="'+s.config.viewClass+'"></div>');var a=new n(o,s);a.run(i),s._view={name:e,instance:a},a.$el.appendTo(s.$el),r(s._view.instance)};"string"==typeof e?require([e],function(t){u(t)}):u(e)},s.prototype.route=function(t,e,i){return void 0===i&&(i=e,e={}),this._route[t]=[e,i],this},s.prototype.url=function(e){e=t.trim(e);for(var i in this._route){var n=this._route[i];if(e===n[1])return i}},s.prototype.run=function(){var t=this,i=new e;for(var n in t._route)!function(e){var n=t._route[e];i.map(e,n[0],function(e){t.callView(n[1],e||{})})}(n);i.init()},s.View=function(t,e){var i=this;this.$el=t,this.app=e,e.config.Template&&(this.Template=e.config.Template),this.http={get:function(t,e){return i.ajax("GET",t,e)},post:function(t,e){return i.ajax("POST",t,e)},put:function(t,e){return i.ajax("PUT",t,e)},head:function(t,e){return i.ajax("HEAD",t,e)},"delete":function(t,e){return i.ajax("DELETE",t,e)}}},s.View.prototype.ajax=function(e,i,n){var o=this,s=t.Deferred();return o.app.loading.show(),t.ajax(i,{type:e,cache:!1,data:n||{},dataType:"json"}).done(function(t){t.state&&(t.Status=t.state,t.error&&(t.ErrorMessage=t.error),t.url&&(t.Url=t.url)),t.Status===!1?(o.app.loading.hide(),o.app.showTip.error(t.ErrorMessage||"发生未知错误",1e3),t.Url&&setTimeout(function(){window.location.href=t.Url},800)):(o.app.loading.hide(),s.resolve(t))}).fail(function(){o.app.loading.hide(),o.app.showTip.error("服务端发生错误了",1e3)}),s.promise()},s.View.prototype.when=function(){return t.when.apply(this,arguments)},s.View.prototype.run=function(t){this.context=t},s.View.prototype.destroy=function(){this.$el.remove()},s.View.extend=function(e){e=t.extend({initialize:function(){}},e||{});var i=e.initialize,o=function(t,e){this.superclass=s.View.prototype,this.superclass.initialize=s.View,i.call(this,t,e)};o.prototype=n.createProto(s.View.prototype),delete e.initialize;for(var r in e)o.prototype[r]=e[r];return o},s}),define("km/autoComplete",["jquery"],function(t){var e={LEFT:37,UP:38,RIGHT:39,DOWN:40,TAB:9,ENTER:13},i=function(e,i){this.$element=e,this.options=t.extend({},{url:null,zIndex:1e3,data:[],max:10,width:null,height:null,isBottom:!0,hightLight:!1,formatItem:function(t){return t}},i),this.tpl='<div class="km-autocomplete"></div>',this.active=0,this.init()};return i.prototype.init=function(){var i=this;this.$listBox=t(this.tpl).hide().appendTo(document.body),this.data=this.options.data||[],this.$element.on("keyup",function(n){var o=t(this),s=t.trim(o.val());switch(i.cache?i.cache!=s&&(i.cache=s,i.search(s),i.active=0):(i.cache=s,i.search(s),i.active=0),n.keyCode){case e.UP:case e.LEFT:n.preventDefault(),i.prev();break;case e.DOWN:case e.RIGHT:i.next();break;case e.ENTER:case e.TAB:i.select()}}),this.$listBox.on("click","li",function(){var e=t(this).text();i.$element.val(e)}),t(document).on("click.autocomplete",function(){i.hide()}),t(window).on("resize.autocomplete",function(){i.setCss()})},i.prototype.search=function(e){var i=this;if(this.options.url)t.ajax({mode:"abort",type:"GET",url:this.options.url,cache:!1,data:{keyword:e}}).done(function(t){if(t&&t instanceof Array){var n;i.data=t,n=i.getData(e),i.build(e,n),i.show()}});else if(this.options.proxy)this.options.proxy(e,function(t){i.data=t,t=i.getData(e),i.build(e,t),i.show()});else{var n=this.getData(e);this.build(e,n),this.show()}},i.prototype.getData=function(t){var e=[],i=0;if(0===t.length)return e;for(var n,o=0;o<this.data.length;o++)if(n=this.options.formatItem(this.data[o]),0==n.toLowerCase().indexOf(t.toLowerCase())){if(e.push(n),i===this.options.max-1)break;i++}return e},i.prototype.build=function(t,e){if(this.$listBox.find("ul").remove(),this.$listItem=null,0!==e.length){for(var i="<ul>",n=0;n<e.length;n++)i+='<li class="'+(0==n?"active":"")+'">'+this.hightLight(t,e[n])+"</li>";i+="</ul>",this.$listBox.append(i),this.$list=this.$listBox.find("ul"),this.$listItem=this.$listBox.find("li")}},i.prototype.hightLight=function(t,e){if(this.options.hightLight){var i=new RegExp("("+t+")","ig");return e=e.replace(i,"<strong>$1</strong>")}return e},i.prototype.show=function(){return this.hasItem()?(this.setCss(),void this.$listBox.show()):void this.hide()},i.prototype.getCss=function(){var t={left:this.$element.offset().left,top:this.$element.outerHeight()+this.$element.offset().top,width:this.options.width||this.$element.outerWidth()};return this.options.isBottom||(t.top=this.$element.offset().top-this.$listBox.outerHeight(!0)),t},i.prototype.setCss=function(){this.$list.css("height",this.options.height||"auto");var t=this.getCss();this.$listBox.css(t)},i.prototype.hide=function(){this.$listBox.hide()},i.prototype.prev=function(){this.moveSelect(-1)},i.prototype.next=function(){this.moveSelect(1)},i.prototype.hasItem=function(){return this.$listItem&&this.$listItem.length>0},i.prototype.moveSelect=function(t){if(this.hasItem()){this.active+=t,this.active<0?this.active=this.$listItem.length-1:this.active>this.$listItem.length-1&&(this.active=0);var e=this.$listItem.removeClass("active").eq(this.active).addClass("active"),i=0;this.$listItem.each(function(){i+=this.offsetHeight});var n=this.$list.scrollTop(),o=this.$list[0].clientHeight,s=e.height(),r=e.position().top;r>o?this.$list.scrollTop(r+s-o+n):0>r&&this.$list.scrollTop(n+r)}},i.prototype.select=function(){var t=this.$listBox.find("li.active");this.$element.val(t.text()),this.hide()},i}),define("km/loading",["jquery"],function(t){var e={},i=t('<div class="km-loading"><i class="cmicon cmicon-spinner spin"></i></div>').hide(),n=i.find(".cmicon-spinner");return t(document.body).append(i),e.show=function(){i.show().css({left:"50%",top:"50%",marginLeft:-(n.width()/2),marginTop:-(n.height()/2)})},e.hide=function(){i.hide()},e}),define("km/popTips",["jquery"],function(t){var e=function(){function e(){function e(e,s,r,a){o&&clearTimeout(o),t.isFunction(r)&&(a=r,r=3e3),a=a||t.noop,r=r||3e3,n&&n.stop().remove(),n=t(i(e,s)).appendTo(document.body),n.css({left:"50%",top:"50%",marginLeft:-(n[0].offsetWidth/2),marginTop:-(n[0].offsetHeight/2)}),o=setTimeout(function(){n.stop().remove(),a()},r)}function i(t,e){var i=[];switch(t){case"success":i.push('<div class="km-pop-tips success"><span class="fa fa-check"></span>&nbsp;<span>'+e+"</span></div>");break;case"error":i.push('<div class="km-pop-tips error"><span class="fa fa-close"></span>&nbsp;<span>'+e+"</span></div>");break;case"warning":i.push('<div class="km-pop-tips warning"><span class="fa fa-exclamation"></span>&nbsp;<span>'+e+"</span></div>")}return i.join("")}var n,o;return{success:function(t,i,n){e("success",t,i,n)},error:function(t,i,n){e("error",t,i,n)},warning:function(t,i,n){e("warning",t,i,n)}}}var i;return{getInstance:function(){return i||(i=e()),i}}}();return e.getInstance()}),function(t){var e={addEventListener:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},removeEventListener:function(t,e){t.removeEventListener?t.removeEventListener(e,handler,!1):t.detachEvent?t.detachEvent("on"+e,handler):t["on"+e]=null},proxy:function(t,e){var i=function(){return t.apply(e||this,arguments)};return i}},i=function(){this._routes=[]};i.prototype.init=function(){var i=this;e.addEventListener(t,"hashchange",e.proxy(i.listener,this)),this.listener()},i.prototype.listener=function(){var t,e=location.hash.slice(1).split("?"),i=e[0];e[1]&&(t=this.getUrlParams(e[1]));var n,o=this.getRoute(i),s={};if(!o)return void location.replace("#/");n=this.getValues(i,o);for(var r=0;r<o.params.length;r++)s[o.params[r]]=n[r];t=$.extend({},s,t),o.handle(t)},i.prototype.getUrlParams=function(t){var e={};if(!t)return e;for(var i,n=t.split("&"),o=0;o<n.length;o++)i=n[o].split("="),e[i[0]]=i[1];return e},i.prototype.map=function(t,e,i){var n,o,s,r=[];if(o=t.replace(/\//g,"\\/"),"function"==typeof e&&(i=e,e=null),e)for(var a in e)n=new RegExp("\\{"+a+"\\}","g"),o=o.replace(n,"("+e[a].replace(/\^/,"").replace(/\$/,"")+")"),r.push(a);for(n=new RegExp("{([^}]+)}","g");null!=(s=n.exec(o));)r.push(s[1]),n.lastIndex;return o="^"+o.replace(/{[^}]+}/gi,"(.+)")+"$",this._routes.push({routeUrl:t,pattern:o,params:r,handle:i||function(){}}),this},i.prototype.getValues=function(t,e){var e,i=[];if(0===t.length)return i;if(e=e||this.getRoute(t),null!=e){var n=t.match(e.pattern);if(0!=n.length)for(var o=1;o<n.length;o++)i.push(n[o])}return i},i.prototype.getRoute=function(t){for(var e=0;e<this._routes.length;e++)if(new RegExp(this._routes[e].pattern).test(t))return this._routes[e];return null},"function"==typeof t.define&&define.amd?define("km/router",[],function(){return i}):t.Router=i}(window),define("km/tooltips",["jquery"],function(t){function e(e,i){this.$element=e,this.options=t.extend({},{delay:0,content:"",tipClass:"",placement:"right",trigger:"hover click",container:document.body},i),this.init()}return e.prototype.init=function(){this.$tips=t('<div class="km-tooltips"><div class="tooltips-arrow"></div><div class="tooltips-title"></div><div class="tooltips-inner"></div></div>'),this.$tips.addClass(this.options.placement).addClass(this.options.tipClass),this.setContent(),this.isShow=!1;for(var e,i=this.options.trigger.split(" "),n=0;n<i.length;n++)if(e=i[n],"click"===e)this.$element.on(e+".km-tooltips",t.proxy(this.toggle,this));else if("manual"!=e){var o="hover"===e?"mouseenter":"focus",s="hover"===e?"mouseleave":"blur";this.$element.on(o,t.proxy(this.show,this)),this.$element.on(s,t.proxy(this.hide,this))}this.options.container?this.$tips.appendTo(this.options.container):this.$tips.insertAfter(this.$element),this.hide()},e.prototype.setContent=function(e){e=t.trim(e||this.options.content),0===e.length&&(e=this.$element.attr("data-content")||"");var i=this.$tips;i.find(".tooltips-inner").html(e)},e.prototype.setPosition=function(){var t=this.getOffset();this.$tips.css(t)},e.prototype.getOffset=function(){var t=this.options.placement,e=(this.options.container,this.$element),i=this.$tips,n=e.offset(),o=e.outerWidth(),s=e.outerHeight(),r=i.outerWidth(),a=i.outerHeight();switch(t){case"left":return{top:n.top+s/2-a/2,left:n.left-r};case"top":return{top:n.top-a,left:n.left+o/2-r/2};case"right":return{top:n.top+s/2-a/2,left:n.left+o};case"bottom":return{top:n.top+s,left:n.left+o/2-r/2}}},e.prototype.show=function(){return 0===t.trim(this.options.content).length?void this.hide():(this.isShow=!0,this.setPosition(),void this.$tips.show().addClass("in"))},e.prototype.hide=function(){this.isShow=!1,this.$tips.hide().removeClass("in")},e.prototype.toggle=function(){this.isShow?this.hide():this.show()},e.Global=function(i){var i=i||t('[data-module="tooltips"]');i.each(function(){var i=t(this),n=e.Get(i);n||(n=new e(i,{title:i.attr("data-title"),content:i.attr("data-content"),placement:i.attr("data-placement"),tipClass:i.attr("data-tipClass"),trigger:i.attr("data-trigger")}),e.Set(i,n))})},e.Get=function(t){return t.data("tooltips")},e.Set=function(t,e){t.data("tooltips",e)},e}),define("km/util",function(){var t={},e=function(){};return t.createProto=Object.__proto__?function(t){return{__proto__:t}}:function(t){return e.prototype=t,new e},t}),define("km/validate",["jquery"],function(t){function e(i,n){this.$form=i,this.options=t.extend({},e.DEFAULTS,n),this.rules=this.options.rules,this.messages=this.options.messages,this.init()}return e.DEFAULTS={errorClass:"error",errorElement:"label",rules:{},messages:{},focusClear:!0,keyupClear:!0,errorPlacement:null},e.prototype.getData=function(){var e={},i=this;return i.$form.find("input[name], textarea[name]").each(function(){var i=t(this);if(i.is("[type=checkbox]")===!1&&i.is("[type=radio]")===!1)e[i.attr("name")]=t.trim(i.val());else if(i.is("[type=radio]:checked"))e[i.attr("name")]=t.trim(i.val());else if(i.is("[type=checkbox]:checked")){var n=i.attr("name");e[n]||(e[n]=[]),e[n].push(i.val())}}),e},e.prototype.init=function(){this.getValidFields(),0!==this.validFields.count&&this.eventBind()},e.prototype.getValidFields=function(){this.validFields={data:{},count:0};{var e=this;this.$form.find("input,select,textarea").filter(function(){return this.name in e.rules?!0:!1}).each(function(){e.validFields.data[this.name]||(e.validFields.data[this.name]=t(this),e.validFields.count++)})}},e.prototype.eventBind=function(){var t=this;this.$form.on("submit",function(e){return t.validateFrom(e)}).on("focus blur keyup",':text, [type="password"], [type="file"], select, textarea, [type="number"], [type="search"] ,[type="tel"], [type="url"], [type="email"], [type="datetime"], [type="date"], [type="month"], [type="week"], [type="time"], [type="datetime-local"], [type="range"], [type="color"]',function(e){t.validate(e)}).on("click",'[type="radio"], [type="checkbox"], select, option',function(e){t.validate(e)})},e.prototype.validate=function(e){var i,n,o=e.target,s=t(o),r=this.rules[o.name];if(this.options.focusClear&&"focusin"===e.type||this.options.keyupClear&&"keyup"===e.type)return void this.hideError(s);if(r){n=this.elementValue(s);for(var a in r){var u={method:a,parameters:r[a]};if(i=this.methods[a].call(this,n,s,u.parameters),!i)return this.formatAndAdd(o,u),!1;this.hideError(s)}return!0}},e.prototype.validateFrom=function(){var t=this,e=!0;for(var i in this.validFields.data)t.validate({target:this.validFields.data[i][0]})||(e=!1);return e},e.prototype.valid=function(){return this.validateFrom()},e.prototype.checkable=function(t){return/radio|checkbox/i.test(t.type)},e.prototype.formatAndAdd=function(e,i){var n=t(e),o=this.defaultMessage(e,i.method);o=this.format(o,i.parameters),this.showError(n,o)},e.prototype.showError=function(e,i){this.checkable(e[0])&&(e=this.validFields.data[e[0].name]);var n=e.data("error");n||(n=t("<"+this.options.errorElement+">").addClass(this.options.errorClass),e.data("error",n)),n.html(i).show(),e.addClass(this.options.errorClass),t.isFunction(this.options.errorPlacement)?this.options.errorPlacement(e,n):n.insertAfter(e)},e.prototype.hideError=function(e){this.checkable(e[0])&&(e=this.validFields.data[e[0].name]);var i=e.data("error");e.removeClass(this.options.errorClass),t.isFunction(this.options.errorPlacement)&&this.options.errorPlacement(e,t([])),i&&i.hide()},e.prototype.defaultMessage=function(t,e){return this.messages[t.name]||(this.messages[t.name]={},this.messages[t.name][e]=this.errorMessages[e]),this.messages[t.name][e]||(this.messages[t.name][e]=this.errorMessages[e]),this.messages[t.name][e]},e.prototype.format=function(e,i){return-1!=e.indexOf("{0}")&&(i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})})),e},e.prototype.errorMessages={required:"该字段不能为空",email:"电子邮箱格式错误",url:"url格式错误",date:"请输入一个有效日期",dateISO:"请输入一个有效日期（ISO）",mobile:"手机号码格式错误",phone:"电话号码格式错误",number:"请输入一个有效的数字",digits:"请输入正整数",minLength:"请输入一个长度不小于{0}个字符的值",maxLength:"请输入一个长度不大于{0}个字符的值",rangeLength:"请输入一个长度介于{0}到{1}个字符的值",min:"请输入一个大于或等于{0}的值",max:"请输入一个小于或等于{0}的值",range:"请输入一个介于{0}到{1}之间的数值",equalTo:"请再输入一个相同的值",remote:"远程验证失败"},e.prototype.methods={required:function(e,i){if("select"===i[0].nodeName.toLowerCase()){var n=t.trim(i.val());return n&&n.length>0}return this.checkable(i[0])?this.getLength(e,i[0])>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}|\d{4}[\/-]\d{1,2}[\/-]\d{1,2}\s\d{1,2}[:]\d{1,2}[:]\d{1,2}\w$/.test(t)},mobile:function(t,e){return this.optional(e)||/^((13[0-9])|(15[^4,\\D])|(18[0,5-9]))\d{8}$/.test(t)},phone:function(t,e){return this.optional(e)||/^((0\d{2,3}\-)[1-9]\d{7}(\-\d{1,4})?)$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minLength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i[0]);return this.optional(i)||o>=n},maxLength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i[0]);return this.optional(i)||n>=o},rangeLength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i[0]);return this.optional(i)||o>=n[0]&&o<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,n){var i=t(n);return e===this.elementValue(i)},remote:function(e,i,n){var o,s={},r=this,a=this.previousValue(i[0]);return a.old===e?a.valid:(a.old=e,"string"==typeof n?o=n:(o=n.url,s=n.data),s[i[0].name]=e,s.rnd=Math.random(),t.post(o,s).success(function(t){var e=t===!0||"true"===t;e?r.hideError(i):r.showError(i,a.message),a.valid=e}).error(function(){return!1}),!0)}},e.prototype.previousValue=function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})},e.prototype.optional=function(t){var e=this.elementValue(t);return!this.methods.required.call(this,e,t)},e.prototype.elementValue=function(e){var i=e.attr("type"),n=e.val();return"radio"===i||"checkbox"===i?t("input[name='"+e.attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},e.prototype.getLength=function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.$form.find("[name='"+i.name+"']").filter(":checked").length}return e.length},e}),define("km/validateTooltips",["jquery","km/validate","km/tooltips","km/util"],function(t,e,i,n){var o=function(t,i){e.call(this,t,i)};return o.prototype=n.createProto(e.prototype),o.prototype.getTipsPlacement=function(t){var e=t.name,i="bottom";return this.tipsPlacement||(this.tipsPlacement=this.options.tipsPlacement||{}),this.tipsPlacement[e]?i=this.tipsPlacement[e]:this.tipsPlacement[e]=i,i},o.prototype.showError=function(t,e){this.checkable(t[0])&&(t=this.validFields.data[t[0].name]);var n=this.getTipsPlacement(t[0]),o=i.Get(t);o?o.setContent(e):(o=new i(t,{content:e,tipClass:"danger",trigger:"manual",placement:n}),i.Set(t,o)),o.show(),t.addClass(this.options.errorClass)},o.prototype.hideError=function(t){this.checkable(t[0])&&(t=this.validFields.data[t[0].name]);var e=i.Get(t);e&&e.hide(),t.removeClass(this.options.errorClass)},o}),define("km/wordLimit",["jquery"],function(t){var e=function(e,i){this.$element=e,this.options=t.extend({},{maxLength:140,feedback:".chars"},i),this.init()};return e.prototype.init=function(){var e=this;this.maxLength=parseInt(this.$element.attr("maxLength")||this.options.maxLength),this.$feedback=t(this.options.feedback),this.$element.on("keyup",function(){var i=t.trim(t(this).val());e.update(i)}),this.update(t.trim(this.$element.val()))},e.prototype.update=function(t){var e=t.length,i=this.maxLength,n=i-e;e>=i&&this.$element.val(t.substring(0,i)),this.$feedback.html(0>n?0:n)},e.Global=function(i){i=i||t("input,textarea").filter('[data-module="wordlimit"]'),i.each(function(){var i=t(this),n=i.attr("maxLength"),o=e.Get(i);n&&(o||(o=new e(i,{maxLength:n,feedback:i.attr("data-feedback")}),e.Set(i,o)))})},e.Get=function(t){return t.data("wordLimit")},e.Set=function(t,e){t.data("wordLimit",e)},e}),define("km",["km/app","km/autoComplete","km/loading","km/popTips","km/router","km/tooltips","km/util","km/validate","km/validateTooltips","km/wordLimit"],function(t,e,i,n,o,s,r,a,u,h){return{App:t,AutoComplete:e,loading:i,popTips:n,Router:o,Tooltips:s,util:r,Validate:a,ValidateTooltips:u,WordLimit:h}});